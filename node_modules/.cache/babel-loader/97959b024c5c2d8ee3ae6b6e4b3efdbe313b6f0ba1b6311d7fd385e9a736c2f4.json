{"ast":null,"code":"import _regenerator from \"C:/Users/DELL/OneDrive/Documentos/agenda-medicao/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"C:/Users/DELL/OneDrive/Documentos/agenda-medicao/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"C:/Users/DELL/OneDrive/Documentos/agenda-medicao/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"C:\\\\Users\\\\DELL\\\\OneDrive\\\\Documentos\\\\agenda-medicao\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Login from './components/Login';\nimport Dashboard from './components/Dashboard';\nimport Admin from './components/Admin';\nimport Agendamentos from './components/Agendamentos';\nimport { authService } from './services/auth';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState('dashboard'),\n    _useState6 = _slicedToArray(_useState5, 2),\n    currentView = _useState6[0],\n    setCurrentView = _useState6[1];\n  useEffect(function () {\n    // Verificar se usuário já está logado\n    var checkAuth = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var userInfo, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.p = _context.n) {\n            case 0:\n              _context.p = 0;\n              if (!authService.isAuthenticated()) {\n                _context.n = 2;\n                break;\n              }\n              _context.n = 1;\n              return authService.getUserInfo();\n            case 1:\n              userInfo = _context.v;\n              setUser(userInfo);\n            case 2:\n              _context.n = 4;\n              break;\n            case 3:\n              _context.p = 3;\n              _t = _context.v;\n              console.error('Erro ao verificar autenticação:', _t);\n              authService.logout();\n            case 4:\n              _context.p = 4;\n              setLoading(false);\n              return _context.f(4);\n            case 5:\n              return _context.a(2);\n          }\n        }, _callee, null, [[0, 3, 4, 5]]);\n      }));\n      return function checkAuth() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    checkAuth();\n  }, []);\n  var handleLogin = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(email, password) {\n      var data, _t2;\n      return _regenerator().w(function (_context2) {\n        while (1) switch (_context2.p = _context2.n) {\n          case 0:\n            _context2.p = 0;\n            _context2.n = 1;\n            return authService.login(email, password);\n          case 1:\n            data = _context2.v;\n            setUser(data.user);\n            return _context2.a(2, {\n              success: true\n            });\n          case 2:\n            _context2.p = 2;\n            _t2 = _context2.v;\n            return _context2.a(2, {\n              success: false,\n              error: _t2.message\n            });\n        }\n      }, _callee2, null, [[0, 2]]);\n    }));\n    return function handleLogin(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleLogout = function handleLogout() {\n    authService.logout();\n    setUser(null);\n    setCurrentView('dashboard');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-slate-900 to-slate-700 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white mt-4\",\n          children: \"Carregando...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Login, {\n      onLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 12\n    }, this);\n  }\n  if (currentView === 'admin' && user.role === 'admin') {\n    return /*#__PURE__*/_jsxDEV(Admin, {\n      user: user,\n      onBack: function onBack() {\n        return setCurrentView('dashboard');\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  }\n  if (currentView === 'agendamentos') {\n    return /*#__PURE__*/_jsxDEV(Agendamentos, {\n      user: user,\n      onBack: function onBack() {\n        return setCurrentView('dashboard');\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Dashboard, {\n    user: user,\n    onLogout: handleLogout,\n    onNavigateToAdmin: function onNavigateToAdmin() {\n      return setCurrentView('admin');\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"pliMOaXR/QnkQ6gCtUpHm+ZJEFE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Login","Dashboard","Admin","Agendamentos","authService","jsxDEV","_jsxDEV","App","_s","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","loading","setLoading","_useState5","_useState6","currentView","setCurrentView","checkAuth","_ref","_asyncToGenerator","_regenerator","m","_callee","userInfo","_t","w","_context","p","n","isAuthenticated","getUserInfo","v","console","error","logout","f","a","apply","arguments","handleLogin","_ref2","_callee2","email","password","data","_t2","_context2","login","success","message","_x","_x2","handleLogout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onLogin","role","onBack","onLogout","onNavigateToAdmin","_c","$RefreshReg$"],"sources":["C:/Users/DELL/OneDrive/Documentos/agenda-medicao/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Login from './components/Login';\r\nimport Dashboard from './components/Dashboard';\r\nimport Admin from './components/Admin';\r\nimport Agendamentos from './components/Agendamentos';\r\nimport { authService } from './services/auth';\r\nimport './index.css';\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentView, setCurrentView] = useState('dashboard');\r\n\r\n  useEffect(() => {\r\n    // Verificar se usuário já está logado\r\n    const checkAuth = async () => {\r\n      try {\r\n        if (authService.isAuthenticated()) {\r\n          const userInfo = await authService.getUserInfo();\r\n          setUser(userInfo);\r\n        }\r\n      } catch (error) {\r\n        console.error('Erro ao verificar autenticação:', error);\r\n        authService.logout();\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const handleLogin = async (email, password) => {\r\n    try {\r\n      const data = await authService.login(email, password);\r\n      setUser(data.user);\r\n      return { success: true };\r\n    } catch (error) {\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    authService.logout();\r\n    setUser(null);\r\n    setCurrentView('dashboard');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 to-slate-700 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400\"></div>\r\n          <p className=\"text-white mt-4\">Carregando...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return <Login onLogin={handleLogin} />;\r\n  }\r\n\r\n  if (currentView === 'admin' && user.role === 'admin') {\r\n    return (\r\n      <Admin \r\n        user={user} \r\n        onBack={() => setCurrentView('dashboard')} \r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'agendamentos') {\r\n    return (\r\n      <Agendamentos \r\n        user={user} \r\n        onBack={() => setCurrentView('dashboard')} \r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dashboard \r\n      user={user} \r\n      onLogout={handleLogout}\r\n      onNavigateToAdmin={() => setCurrentView('admin')}\r\n    />\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}